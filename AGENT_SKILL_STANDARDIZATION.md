# Agent Skill 标准化规范

## 1. 核心原则

### 1.1 安全性优先
- **严禁**在任何情况下暴露或记录用户的敏感信息，包括token、密码、个人信息等
- **严禁**将敏感信息硬编码到代码中
- **必须**使用安全的方式处理和存储敏感信息

### 1.2 效率原则
- **避免**冗余的API调用，特别是token验证和用户信息获取
- **实现**合理的缓存策略，减少重复请求
- **优化**代码执行效率，避免不必要的计算和操作

### 1.3 可靠性原则
- **确保**代码的健壮性，处理所有可能的错误情况
- **实现**适当的错误处理和重试机制
- **验证**所有API响应，确保数据的正确性

## 2. 思考流程规范

### 2.1 任务分析阶段
1. **理解需求**：仔细阅读用户请求，确保完全理解需求
2. **分析依赖**：识别任务所需的依赖项和资源
3. **制定计划**：创建详细的任务执行计划，包括步骤和预期结果
4. **风险评估**：识别潜在的风险和挑战

### 2.2 代码分析阶段
1. **代码探索**：使用适当的工具探索代码库结构
2. **依赖分析**：识别项目的依赖项和技术栈
3. **逻辑分析**：理解现有代码的逻辑和架构
4. **问题定位**：精确定位需要修改的代码位置

### 2.3 实现阶段
1. **遵循规范**：严格按照项目的代码风格和架构规范
2. **模块化设计**：将代码分解为可重用的模块
3. **错误处理**：实现全面的错误处理机制
4. **性能优化**：考虑代码的性能影响
5. **安全性**：确保代码的安全性

### 2.4 验证阶段
1. **测试**：运行项目的测试套件
2. **代码检查**：使用lint和类型检查工具
3. **性能验证**：确保代码的性能符合预期
4. **安全性验证**：检查代码是否存在安全漏洞

## 3. API调用规范

### 3.1 Token管理
- **单一来源**：所有token相关的操作必须通过统一的管理机制
- **缓存策略**：实现token的缓存，避免频繁的token验证请求
- **过期处理**：正确处理token过期的情况
- **刷新机制**：实现token的自动刷新机制

### 3.2 请求管理
- **批量请求**：合并相似的API请求，减少网络开销
- **防抖节流**：对频繁的API请求实现防抖或节流
- **错误重试**：实现合理的错误重试机制
- **超时处理**：设置适当的请求超时时间

### 3.3 响应处理
- **统一解析**：使用统一的响应解析机制
- **错误处理**：正确处理API返回的错误
- **数据验证**：验证API返回的数据格式和内容
- **缓存更新**：根据API响应更新相关缓存

## 4. 缓存策略规范

### 4.1 缓存层级
- **内存缓存**：用于频繁访问的数据，如用户信息
- **会话缓存**：用于会话期间需要的数据
- **本地缓存**：用于需要持久化的数据

### 4.2 缓存键设计
- **唯一性**：确保缓存键的唯一性
- **可读性**：使用有意义的缓存键命名
- **一致性**：统一缓存键的命名规范

### 4.3 缓存失效
- **主动失效**：在数据变更时主动失效相关缓存
- **过期时间**：为所有缓存设置合理的过期时间
- **版本控制**：使用版本控制机制管理缓存

## 5. 错误处理规范

### 5.1 错误分类
- **网络错误**：处理网络连接问题
- **API错误**：处理API返回的错误
- **业务错误**：处理业务逻辑相关的错误
- **系统错误**：处理系统级别的错误

### 5.2 错误处理策略
- **优雅降级**：在错误发生时提供合理的降级方案
- **用户反馈**：向用户提供清晰的错误信息
- **错误日志**：记录详细的错误信息，便于调试
- **自动恢复**：实现自动从错误中恢复的机制

## 6. 性能优化规范

### 6.1 代码优化
- **减少重渲染**：优化React组件的渲染性能
- **代码分割**：实现合理的代码分割
- **懒加载**：对大型资源实现懒加载
- **虚拟滚动**：对长列表实现虚拟滚动

### 6.2 网络优化
- **减少请求**：合并和减少API请求
- **缓存策略**：实现有效的缓存策略
- **压缩传输**：使用压缩技术减少传输数据大小
- **预加载**：预加载可能需要的资源

## 7. 安全规范

### 7.1 数据安全
- **加密存储**：对敏感数据进行加密存储
- **传输安全**：确保数据传输的安全性
- **访问控制**：实现适当的访问控制机制
- **数据验证**：验证所有用户输入

### 7.2 代码安全
- **避免XSS**：防止跨站脚本攻击
- **避免CSRF**：防止跨站请求伪造
- **避免注入**：防止SQL注入等攻击
- **安全依赖**：使用安全的依赖项版本

## 8. 开发工具规范

### 8.1 工具使用
- **代码编辑器**：使用指定的代码编辑器和插件
- **版本控制**：正确使用版本控制系统
- **构建工具**：使用项目指定的构建工具
- **包管理器**：使用项目指定的包管理器

### 8.2 工作流程
- **分支管理**：遵循指定的分支管理策略
- **提交规范**：使用统一的提交消息格式
- **代码审查**：参与代码审查过程
- **持续集成**：使用持续集成工具

## 9. 输出规范

### 9.1 代码输出
- **格式正确**：确保代码格式正确，符合项目规范
- **类型安全**：确保代码的类型安全性
- **注释完整**：添加适当的注释，提高代码可读性
- **测试覆盖**：为代码添加适当的测试

### 9.2 文档输出
- **结构清晰**：文档结构清晰，易于阅读
- **内容完整**：文档内容完整，涵盖所有必要的信息
- **格式一致**：使用一致的文档格式
- **示例丰富**：提供足够的示例代码和使用说明

### 9.3 沟通输出
- **语言清晰**：使用清晰、简洁的语言
- **响应及时**：及时响应用户的请求和问题
- **态度专业**：保持专业的态度和语气
- **信息准确**：确保提供的信息准确无误

## 10. 禁止事项

### 10.1 绝对禁止
- **禁止**生成包含错误的代码
- **禁止**生成不安全的代码
- **禁止**生成低质量的代码
- **禁止**生成与需求不符的代码

### 10.2 强烈不建议
- **不建议**使用过时的技术和库
- **不建议**使用复杂的解决方案解决简单问题
- **不建议**忽略项目的代码规范和架构
- **不建议**在没有充分测试的情况下提交代码

## 11. 最佳实践

### 11.1 代码组织
- **模块化**：将代码分解为可重用的模块
- **关注点分离**：将不同的关注点分离到不同的文件中
- **命名规范**：使用一致的命名规范
- **目录结构**：遵循项目的目录结构规范

### 11.2 API调用
- **使用React Query**：使用React Query管理API请求和缓存
- **集中管理**：集中管理API调用逻辑
- **错误处理**：实现全面的错误处理
- **类型安全**：确保API调用的类型安全性

### 11.3 状态管理
- **使用Zustand**：使用Zustand管理应用状态
- **最小化状态**：只存储必要的状态
- **状态持久化**：实现适当的状态持久化
- **状态同步**：确保状态在不同组件间的同步

### 11.4 用户体验
- **响应迅速**：确保应用的响应速度
- **反馈及时**：为用户操作提供及时的反馈
- **错误处理**：优雅地处理错误，提供清晰的错误信息
- **加载状态**：为长时间操作提供加载状态指示

## 12. 总结

本规范旨在确保Agent能够生成高质量、安全、高效的代码，同时提供良好的用户体验。所有Agent都应该严格遵守本规范，不断提高自身的技能水平。

通过遵循本规范，我们可以：
- 提高代码的质量和可维护性
- 减少错误和bug的数量
- 提高开发效率和速度
- 提供更好的用户体验
- 确保应用的安全性和可靠性

---

**版本**：1.0.0
**更新日期**：2026-01-28
**适用范围**：所有前端项目开发
