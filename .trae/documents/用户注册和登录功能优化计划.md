## 1. 创建前端页面类型定义目录和文件

**文件结构：**

* `src\app\types\auth\login.ts` - 登录页面类型定义

* `src\app\types\auth\register.ts` - 注册页面类型定义

**实现内容：**

* 定义登录表单数据类型 `LoginFormData`

* 定义注册表单数据类型 `RegisterFormData`，确保字段名与后端一致

* 定义登录API响应类型 `LoginApiResponse`，匹配后端响应格式

* 定义注册API响应类型 `RegisterApiResponse`，匹配后端响应格式

* 确保所有类型定义的字段名与后端API完全一致

## 2. 实现注册API路由

**文件：** `src\app\api\auth\register\route.ts`

**实现内容：**

* 创建POST方法处理注册请求

* 导入并调用`handleRegister`函数

* 确保遵循Next.js App Router API路由规范

* 添加GET方法返回405错误

## 3. 优化登录处理函数

**文件：** `src\api\handlers\auth\loginHandler.ts`

**优化内容：**

* 确保请求体使用`account`字段（与后端一致）

* 确保返回标准化的`ApiResponse`格式

* 当后端返回`code: 0`时，转换为`success: true`

* 当后端返回其他`code`值时，转换为`success: false`

* 确保token正确保存到HttpOnly cookie

## 4. 优化注册处理函数

**文件：** `src\api\handlers\auth\registerHandler.ts`

**优化内容：**

* 确保请求体字段名与后端一致

* 确保返回标准化的`ApiResponse`格式

* 当后端返回`code: 0`时，转换为`success: true`

* 当后端返回其他`code`值时，转换为`success: false`

## 5. 优化登录页面组件

**文件：** `src\app\publisher\auth\login\page.tsx`

**优化内容：**

* 导入并使用新创建的类型定义

* 更新表单字段名：`username` → `account`（与后端一致）

* 更新请求体字段名：`username` → `account`（与后端一致）

* 简化响应处理逻辑，直接使用后端返回的`code`和`message`

* 确保成功登录后正确跳转到仪表盘

* 优化表单验证逻辑，提供即时用户反馈

## 6. 优化注册页面组件

**文件：** `src\app\publisher\auth\register\page.tsx`

**优化内容：**

* 导入并使用新创建的类型定义

* 更新请求体格式，确保所有字段名与后端一致

* 简化响应处理逻辑，直接使用后端返回的`code`和`message`

* 确保注册成功后正确跳转到登录页面

* 优化表单验证逻辑，提供即时用户反馈

## 7. 验证和测试

**验证内容：**

* 运行诊断工具检查类型错误

* 运行构建命令确保项目能正常构建

* 测试注册功能：确保能成功注册新用户

* 测试登录功能：确保能成功登录已注册用户

* 测试错误处理：确保能正确处理各种错误情况

通过这个计划，我们将实现完整的用户注册和登录功能，包含类型安全的前端页面组件、标准化的API响应格式、完善的错误处理逻辑，同时确保所有字段名都与后端API完全一致，实现统一化管理。
