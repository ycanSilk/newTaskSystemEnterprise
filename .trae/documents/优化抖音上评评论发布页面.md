# 优化抖音上评评论发布页面

## 1. 创建支付密码组件
- 从 `src/app/publisher/recharge/page.tsx` 复制支付密码模态框组件
- 封装为可复用组件，保存到 `src/components/payPalPwd/payPalPwd.tsx`
- 保留原有的样式和功能，简化接口设计

## 2. 创建/更新类型定义
- 更新 `src/app/types/task/publishSingleTaskTypes.ts` 文件
- 定义前端表单所需的类型：
  - 评论项类型
  - 表单数据类型
  - API请求和响应类型

## 3. 修改 `publish-top-comment/page.tsx` 页面

### 3.1 基础修改
- 保留原有UI布局和样式
- 删除现有数据类型定义和API调用代码
- 引入新的类型定义
- 添加URL参数接收逻辑：`template_id` 和 `price`

### 3.2 功能修改
- **时间处理优化**：
  - 使用分钟存储截止时间
  - 添加当前时间戳变量
  - 计算截止时间：当前时间 + 任务截止时间（分钟）

- **API调用优化**：
  - 调用 `src/app/api/task/publishSingleTask/route.ts` 端点
  - 正确格式化请求体
  - 处理API响应，显示提示信息

- **表单优化**：
  - 计算总价格：`task_count * total_price`
  - 将评论和图片组织为 `recommend_marks` 数组

- **支付流程优化**：
  - 点击发布按钮，调起支付密码组件
  - 输入密码后调用API
  - 根据响应显示结果提示

## 4. 测试和验证
- 确保页面加载时正确接收URL参数
- 验证表单数据格式正确
- 确认支付流程正常
- 检查API调用成功
- 验证响应提示正确显示

## 5. 代码规范
- 严格遵循项目现有的代码风格
- 确保类型安全
- 保留原有的UI设计
- 不做多余的修改

## 实现顺序
1. 创建支付密码组件
2. 更新类型定义
3. 修改前端页面
4. 测试功能

所有修改都将严格按照API_REQUEST_STANDARD.md的规范执行，确保代码质量和可维护性。